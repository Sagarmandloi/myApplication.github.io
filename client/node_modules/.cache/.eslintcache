[{"C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\index.js":"1","C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\reportWebVitals.js":"2","C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\App.js":"3","C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\modules\\Form\\index.js":"4","C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\modules\\Dashboard\\index.js":"5","C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\modules\\Dashboard\\LogOut.js":"6","C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\components\\Button\\index.js":"7","C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\components\\Input\\index.js":"8"},{"size":602,"mtime":1706212936130,"results":"9","hashOfConfig":"10"},{"size":375,"mtime":1706212936133,"results":"11","hashOfConfig":"10"},{"size":1097,"mtime":1706592024139,"results":"12","hashOfConfig":"10"},{"size":2841,"mtime":1706677077150,"results":"13","hashOfConfig":"10"},{"size":9924,"mtime":1709964646044,"results":"14","hashOfConfig":"10"},{"size":239,"mtime":1709964546564,"results":"15","hashOfConfig":"10"},{"size":424,"mtime":1706212936129,"results":"16","hashOfConfig":"10"},{"size":716,"mtime":1706212936130,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","suppressedMessages":"20","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"19i7ih5",{"filePath":"21","messages":"22","suppressedMessages":"23","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"24","messages":"25","suppressedMessages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","suppressedMessages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","suppressedMessages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33"},{"filePath":"34","messages":"35","suppressedMessages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","suppressedMessages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","suppressedMessages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\index.js",[],[],"C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\reportWebVitals.js",[],[],"C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\App.js",[],[],"C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\modules\\Form\\index.js",[],[],"C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\modules\\Dashboard\\index.js",["43","44","45"],[],"import { useEffect, useRef, useState  } from 'react'\r\nimport Img1 from '../../assets/img1.jpg'\r\nimport img7 from '../../assets/img7.jpg'\r\nimport img8 from '../../assets/img8.jpg'\r\n\r\nimport Input from '../../components/Input'\r\nimport { io } from 'socket.io-client'\r\nimport Logout from'./LogOut'\r\n\r\n\r\nconst Dashboard = () => {\r\n\tconst [user, setUser] = useState(JSON.parse(localStorage.getItem('user:detail')))\r\n\tconst [conversations, setConversations] = useState([])\r\n\tconst [messages, setMessages] = useState({})\r\n\tconst [message, setMessage] = useState('')\r\n\tconst [users, setUsers] = useState([])\r\n\tconst [socket, setSocket] = useState(null)\r\n\tconst messageRef = useRef(null)\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket=io('http://localhost:8080')\r\n\t\tsetSocket(socket);\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tsocket?.emit('addUser', user?.id);\r\n\t\tsocket?.on('getUsers', users => {\r\n\t\t\tconsole.log('activeUsers :>> ', users);\r\n\t\t})\r\n\t\tsocket?.on('getMessage', data => {\r\n\t\t\tsetMessages(prev => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\tmessages: [...prev.messages, { user: data.user, message: data.message }]\r\n\t\t\t}))\r\n\t\t})\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tmessageRef?.current?.scrollIntoView({ behavior: 'smooth' })\r\n\t}, [messages?.messages])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst loggedInUser = JSON.parse(localStorage.getItem('user:detail'))\r\n\t\tconst fetchConversations = async () => {\r\n\t\t\tconst res = await fetch(`http://localhost:8000/api/conversations/${loggedInUser?.id}`, {\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst resData = await res.json()\r\n\t\t\tsetConversations(resData)\r\n\t\t\t\r\n\t\t}\r\n\t\tfetchConversations()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUsers = async () => {\r\n\t\t\tconst res = await fetch(`http://localhost:8000/api/users/${user?.id}`, {\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst resData = await res.json()\r\n\t\t\tconsole.log('setUser',resData);\r\n\t\t\tsetUsers(resData)\r\n\r\n\t\t\t\r\n\t\t}\r\n\t\tfetchUsers()\r\n\t}, [user])\r\n\r\n\tconst fetchMessages = async (conversationId, receiver) => {\r\n\t\tconst res = await fetch(`http://localhost:8000/api/message/${conversationId}?senderId=${user?.id}&&receiverId=${receiver?.receiverId}`, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst resData = await res.json()\r\n\t\tsetMessages({ messages: resData, receiver, conversationId })\r\n\t\tconsole.log('setMessegaes',resData);\r\n\t}\r\n\r\n\tconst sendMessage = async (e) => {\r\n\t\tsetMessage('')\r\n\t\tsocket?.emit('sendMessage', {\r\n\t\t\tsenderId: user?.id,\r\n\t\t\treceiverId: messages?.receiver?.receiverId,\r\n\t\t\tmessage,\r\n\t\t\tconversationId: messages?.conversationId\r\n\t\t});\r\n\t\tconst res = await fetch(`http://localhost:8000/api/message`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tconversationId: messages?.conversationId,\r\n\t\t\t\tsenderId: user?.id,\r\n\t\t\t\tmessage,\r\n\t\t\t\treceiverId: messages?.receiver?.receiverId\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n    const HandleLogout = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlocalStorage.removeItem('user:token');\r\n\t\r\n\t\tsocket.disconnect();\r\n\t\r\n\t\t// Use useEffect to wait for the socket to disconnect before navigating\r\n\t\tuseEffect(() => {\r\n\t\t  const waitForSocketDisconnect = async () => {\r\n\t\t\tawait new Promise((resolve) => {\r\n\t\t\t  socket.on('disconnect', () => {\r\n\t\t\t\tresolve();\r\n\t\t\t  });\r\n\t\t\t});\r\n\t\r\n\t\t\t// Once the socket is disconnected, navigate to the login page\r\n\t\t\t<Logout/>\r\n\t\t  };\r\n\t\r\n\t\t  waitForSocketDisconnect();\r\n\t\t}, [ \r\n\t\t]);\r\n\t  \r\n\t//socket.disconnect(); // Disconnect the socket\r\n\t//navigate('/login'); // Redirect to the login page\r\n   }\r\n\t\r\n\r\n    \r\n\t\r\n\r\n\treturn (\r\n\t\t<div className='w-screen flex'>\r\n\t\t\t<div className='w-[25%] h-screen bg-secondary overflow-scroll'>\r\n\t\t\t\t<div className='flex items-center my-8 mx-14'>\r\n\t\t\t\t\t<div><img src={img8} width={75} height={75} className='border border-primary p-[2px] rounded-full' alt='' /></div>\r\n\t\t\t\t\t<div className='ml-8'>\r\n\t\t\t\t\t\t<h3 className='text-2xl'>{user?.fullName}</h3>\r\n\t\t\t\t\t\t<p className='text-lg font-light'>{user.email}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<div className='mx-14 mt-10'>\r\n\t\t\t\t\t<div className='text-primary text-lg'>Messages</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconversations.length > 0 ?\r\n\t\t\t\t\t\t\t\tconversations.map(({ conversationId, user }) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div className='flex items-center py-8 border-b border-b-gray-300'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='cursor-pointer flex items-center' onClick={() => fetchMessages(conversationId, user)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div><img src={img8} className=\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\" alt='' /></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='ml-6'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 className='text-lg font-semibold'>{user?.fullName}</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className='text-sm font-light text-gray-600'>{user?.email}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}) : <div className='text-center text-lg font-semibold mt-24'>No Conversations</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='w-[50%] h-screen bg-white flex flex-col items-center'>\r\n\t\t\t\t{\r\n\t\t\t\t\tmessages?.receiver?.fullName &&\r\n\t\t\t\t\t<div className='w-[75%] bg-secondary h-[80px] my-14 rounded-full flex items-center px-14 py-2'>\r\n\t\t\t\t\t\t<div className='cursor-pointer'><img src={Img1} width={60} height={60} className=\"rounded-full\" alt='' /></div>\r\n\t\t\t\t\t\t<div className='ml-6 mr-auto'>\r\n\t\t\t\t\t\t\t<h3 className='text-lg'>{messages?.receiver?.fullName}</h3>\r\n\t\t\t\t\t\t\t<p className='text-sm font-light text-gray-600'>{messages?.receiver?.email}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='cursor-pointer'>\r\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-phone-outgoing\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"black\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n\t\t\t\t\t\t\t\t<path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n\t\t\t\t\t\t\t\t<path d=\"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2\" />\r\n\t\t\t\t\t\t\t\t<line x1=\"15\" y1=\"9\" x2=\"20\" y2=\"4\" />\r\n\t\t\t\t\t\t\t\t<polyline points=\"16 4 20 4 20 8\" />\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className='h-[75%] w-full overflow-scroll shadow-sm'>\r\n\t\t\t\t\t<div className='p-14'>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmessages?.messages?.length > 0 ?\r\n\t\t\t\t\t\t\t\tmessages.messages.map(({ message, user: { id } = {} }) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<div className={`max-w-[40%] rounded-b-xl p-4 mb-6 ${id === user?.id ? 'bg-primary text-white rounded-tl-xl ml-auto' : 'bg-secondary rounded-tr-xl'} `}>{message}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div ref={messageRef}></div>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}) : <div className='text-center text-lg font-semibold mt-24'>No Messages or No Conversation Selected</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tmessages?.receiver?.fullName &&\r\n\t\t\t\t\t<div className=' p-9 w-full flex items-center'>\r\n\t\t\t\t\t\t<Input placeholder='Type a message...' value={message} onChange={(e) => setMessage(e.target.value)} className='w-[75%]' inputClassName='p-4 border-0 shadow-md rounded-full bg-light focus:ring-0 focus:border-0 outline-none' />\r\n\t\t\t\t\t\t<div className={`ml-4 p-2 cursor-pointer bg-light rounded-full ${!message && 'pointer-events-none'}`} onClick={() => sendMessage()}>\r\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-send\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"#2c3e50\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n\t\t\t\t\t\t\t\t<path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n\t\t\t\t\t\t\t\t<line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\" />\r\n\t\t\t\t\t\t\t\t<path d=\"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5\" />\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={`ml-4 p-2 cursor-pointer bg-light rounded-full ${!message && 'pointer-events-none'}`}>\r\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-circle-plus\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"#2c3e50\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n\t\t\t\t\t\t\t\t<path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n\t\t\t\t\t\t\t\t<circle cx=\"12\" cy=\"12\" r=\"9\" />\r\n\t\t\t\t\t\t\t\t<line x1=\"9\" y1=\"12\" x2=\"15\" y2=\"12\" />\r\n\t\t\t\t\t\t\t\t<line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"15\" />\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className='w-[25%] h-screen bg-light px-8 py-16 overflow-scroll'>\r\n\t\t\t\t\t<div className='ml-40 mb-15 cursor-pointer' onClick={(e)=>HandleLogout(e)}> \r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-logout\" width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"#2c3e50\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n  <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n  <path d=\"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2\" />\r\n  <path d=\"M9 12h12l-3 -3\" />\r\n  <path d=\"M18 15l3 -3\" />\r\n</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t<div className='text-primary text-lg'>People</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tusers.length > 0 ?\r\n\t\t\t\t\t\t\tusers.map(({ userId, user }) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className='flex items-center py-8 border-b border-b-gray-300'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='cursor-pointer flex items-center' onClick={() => fetchMessages('new', user)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div><img src={img7} className=\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\" alt=''/></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='ml-6'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className='text-lg font-semibold'>{user?.fullName}</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className='text-sm font-light text-gray-600'>{user?.email}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}) : <div className='text-center text-lg font-semibold mt-24'>No Conversations</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Dashboard","C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\modules\\Dashboard\\LogOut.js",[],[],"C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\components\\Button\\index.js",[],[],"C:\\Users\\DELL\\Desktop\\MERN PROJECT\\chatClone\\chat-app\\Chat App\\client\\src\\components\\Input\\index.js",[],[],{"ruleId":"46","severity":1,"message":"47","line":12,"column":15,"nodeType":"48","messageId":"49","endLine":12,"endColumn":22},{"ruleId":"50","severity":1,"message":"51","line":37,"column":5,"nodeType":"52","endLine":37,"endColumn":7,"suggestions":"53"},{"ruleId":"46","severity":1,"message":"54","line":96,"column":9,"nodeType":"48","messageId":"49","endLine":96,"endColumn":12},"no-unused-vars","'setUser' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'socket' and 'user?.id'. Either include them or remove the dependency array.","ArrayExpression",["55"],"'res' is assigned a value but never used.",{"desc":"56","fix":"57"},"Update the dependencies array to be: [socket, user?.id]",{"range":"58","text":"59"},[1100,1102],"[socket, user?.id]"]