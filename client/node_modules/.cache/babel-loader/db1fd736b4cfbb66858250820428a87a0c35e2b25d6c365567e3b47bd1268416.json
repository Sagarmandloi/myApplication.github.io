{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Desktop/MERN PROJECT/chatClone/chat-app/Chat App/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/MERN PROJECT/chatClone/chat-app/Chat App/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/DELL/Desktop/MERN PROJECT/chatClone/chat-app/Chat App/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/DELL/Desktop/MERN PROJECT/chatClone/chat-app/Chat App/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/DELL/Desktop/MERN PROJECT/chatClone/chat-app/Chat App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from'react';import Img1 from'../../assets/img1.jpg';import img7 from'../../assets/img7.jpg';import img8 from'../../assets/img8.jpg';import Input from'../../components/Input';import{io}from'socket.io-client';import Logout from'./LogOut';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _messages$receiver3,_messages$receiver4,_messages$receiver5,_messages$messages,_messages$receiver6;var _useState=useState(JSON.parse(localStorage.getItem('user:detail'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),conversations=_useState4[0],setConversations=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),messages=_useState6[0],setMessages=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),users=_useState10[0],setUsers=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),socket=_useState12[0],setSocket=_useState12[1];var messageRef=useRef(null);useEffect(function(){var socket=io('http://localhost:8080');setSocket(socket);},[]);useEffect(function(){socket===null||socket===void 0?void 0:socket.emit('addUser',user===null||user===void 0?void 0:user.id);socket===null||socket===void 0?void 0:socket.on('getUsers',function(users){console.log('activeUsers :>> ',users);});socket===null||socket===void 0?void 0:socket.on('getMessage',function(data){setMessages(function(prev){return _objectSpread(_objectSpread({},prev),{},{messages:[].concat(_toConsumableArray(prev.messages),[{user:data.user,message:data.message}])});});});},[]);useEffect(function(){var _messageRef$current;messageRef===null||messageRef===void 0?void 0:(_messageRef$current=messageRef.current)===null||_messageRef$current===void 0?void 0:_messageRef$current.scrollIntoView({behavior:'smooth'});},[messages===null||messages===void 0?void 0:messages.messages]);useEffect(function(){var loggedInUser=JSON.parse(localStorage.getItem('user:detail'));var fetchConversations=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,resData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8000/api/conversations/\".concat(loggedInUser===null||loggedInUser===void 0?void 0:loggedInUser.id),{method:'GET',headers:{'Content-Type':'application/json'}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:resData=_context.sent;setConversations(resData);case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchConversations(){return _ref.apply(this,arguments);};}();fetchConversations();},[]);useEffect(function(){var fetchUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,resData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:8000/api/users/\".concat(user===null||user===void 0?void 0:user.id),{method:'GET',headers:{'Content-Type':'application/json'}});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:resData=_context2.sent;console.log('setUser',resData);setUsers(resData);case 8:case\"end\":return _context2.stop();}},_callee2);}));return function fetchUsers(){return _ref2.apply(this,arguments);};}();fetchUsers();},[user]);var fetchMessages=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(conversationId,receiver){var res,resData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://localhost:8000/api/message/\".concat(conversationId,\"?senderId=\").concat(user===null||user===void 0?void 0:user.id,\"&&receiverId=\").concat(receiver===null||receiver===void 0?void 0:receiver.receiverId),{method:'GET',headers:{'Content-Type':'application/json'}});case 2:res=_context3.sent;_context3.next=5;return res.json();case 5:resData=_context3.sent;setMessages({messages:resData,receiver:receiver,conversationId:conversationId});console.log('setMessegaes',resData);case 8:case\"end\":return _context3.stop();}},_callee3);}));return function fetchMessages(_x,_x2){return _ref3.apply(this,arguments);};}();var sendMessage=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e){var _messages$receiver,_messages$receiver2;var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:setMessage('');socket===null||socket===void 0?void 0:socket.emit('sendMessage',{senderId:user===null||user===void 0?void 0:user.id,receiverId:messages===null||messages===void 0?void 0:(_messages$receiver=messages.receiver)===null||_messages$receiver===void 0?void 0:_messages$receiver.receiverId,message:message,conversationId:messages===null||messages===void 0?void 0:messages.conversationId});_context4.next=4;return fetch(\"http://localhost:8000/api/message\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({conversationId:messages===null||messages===void 0?void 0:messages.conversationId,senderId:user===null||user===void 0?void 0:user.id,message:message,receiverId:messages===null||messages===void 0?void 0:(_messages$receiver2=messages.receiver)===null||_messages$receiver2===void 0?void 0:_messages$receiver2.receiverId})});case 4:res=_context4.sent;case 5:case\"end\":return _context4.stop();}},_callee4);}));return function sendMessage(_x3){return _ref4.apply(this,arguments);};}();var HandleLogout=function HandleLogout(e){e.preventDefault();localStorage.removeItem('user:token');socket.disconnect();// Use useEffect to wait for the socket to disconnect before navigating\nuseEffect(function(){var waitForSocketDisconnect=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return new Promise(function(resolve){socket.on('disconnect',function(){resolve();});});case 2:// Once the socket is disconnected, navigate to the login page\n/*#__PURE__*/_jsx(Logout,{});case 3:case\"end\":return _context5.stop();}},_callee5);}));return function waitForSocketDisconnect(){return _ref5.apply(this,arguments);};}();waitForSocketDisconnect();},[]);//socket.disconnect(); // Disconnect the socket\n//navigate('/login'); // Redirect to the login page\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-screen flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-[25%] h-screen bg-secondary overflow-scroll\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center my-8 mx-14\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:img8,width:75,height:75,className:\"border border-primary p-[2px] rounded-full\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl\",children:user===null||user===void 0?void 0:user.fullName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-light\",children:user.email})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-14 mt-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-primary text-lg\",children:\"Messages\"}),/*#__PURE__*/_jsx(\"div\",{children:conversations.length>0?conversations.map(function(_ref6){var conversationId=_ref6.conversationId,user=_ref6.user;return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center py-8 border-b border-b-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cursor-pointer flex items-center\",onClick:function onClick(){return fetchMessages(conversationId,user);},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:img8,className:\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:user===null||user===void 0?void 0:user.fullName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-light text-gray-600\",children:user===null||user===void 0?void 0:user.email})]})]})});}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-lg font-semibold mt-24\",children:\"No Conversations\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-[50%] h-screen bg-white flex flex-col items-center\",children:[(messages===null||messages===void 0?void 0:(_messages$receiver3=messages.receiver)===null||_messages$receiver3===void 0?void 0:_messages$receiver3.fullName)&&/*#__PURE__*/_jsxs(\"div\",{className:\"w-[75%] bg-secondary h-[80px] my-14 rounded-full flex items-center px-14 py-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(\"img\",{src:Img1,width:60,height:60,className:\"rounded-full\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-6 mr-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg\",children:messages===null||messages===void 0?void 0:(_messages$receiver4=messages.receiver)===null||_messages$receiver4===void 0?void 0:_messages$receiver4.fullName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-light text-gray-600\",children:messages===null||messages===void 0?void 0:(_messages$receiver5=messages.receiver)===null||_messages$receiver5===void 0?void 0:_messages$receiver5.email})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cursor-pointer\",children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",class:\"icon icon-tabler icon-tabler-phone-outgoing\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",\"stroke-width\":\"1.5\",stroke:\"black\",fill:\"none\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",children:[/*#__PURE__*/_jsx(\"path\",{stroke:\"none\",d:\"M0 0h24v24H0z\",fill:\"none\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"15\",y1:\"9\",x2:\"20\",y2:\"4\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"16 4 20 4 20 8\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-[75%] w-full overflow-scroll shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-14\",children:(messages===null||messages===void 0?void 0:(_messages$messages=messages.messages)===null||_messages$messages===void 0?void 0:_messages$messages.length)>0?messages.messages.map(function(_ref7){var message=_ref7.message,_ref7$user=_ref7.user,_ref7$user2=_ref7$user===void 0?{}:_ref7$user,id=_ref7$user2.id;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"max-w-[40%] rounded-b-xl p-4 mb-6 \".concat(id===(user===null||user===void 0?void 0:user.id)?'bg-primary text-white rounded-tl-xl ml-auto':'bg-secondary rounded-tr-xl',\" \"),children:message}),/*#__PURE__*/_jsx(\"div\",{ref:messageRef})]});}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-lg font-semibold mt-24\",children:\"No Messages or No Conversation Selected\"})})}),(messages===null||messages===void 0?void 0:(_messages$receiver6=messages.receiver)===null||_messages$receiver6===void 0?void 0:_messages$receiver6.fullName)&&/*#__PURE__*/_jsxs(\"div\",{className:\" p-9 w-full flex items-center\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Type a message...\",value:message,onChange:function onChange(e){return setMessage(e.target.value);},className:\"w-[75%]\",inputClassName:\"p-4 border-0 shadow-md rounded-full bg-light focus:ring-0 focus:border-0 outline-none\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 p-2 cursor-pointer bg-light rounded-full \".concat(!message&&'pointer-events-none'),onClick:function onClick(){return sendMessage();},children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",class:\"icon icon-tabler icon-tabler-send\",width:\"30\",height:\"30\",viewBox:\"0 0 24 24\",\"stroke-width\":\"1.5\",stroke:\"#2c3e50\",fill:\"none\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",children:[/*#__PURE__*/_jsx(\"path\",{stroke:\"none\",d:\"M0 0h24v24H0z\",fill:\"none\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"10\",y1:\"14\",x2:\"21\",y2:\"3\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 p-2 cursor-pointer bg-light rounded-full \".concat(!message&&'pointer-events-none'),children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",class:\"icon icon-tabler icon-tabler-circle-plus\",width:\"30\",height:\"30\",viewBox:\"0 0 24 24\",\"stroke-width\":\"1.5\",stroke:\"#2c3e50\",fill:\"none\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",children:[/*#__PURE__*/_jsx(\"path\",{stroke:\"none\",d:\"M0 0h24v24H0z\",fill:\"none\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"9\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"12\",x2:\"15\",y2:\"12\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"9\",x2:\"12\",y2:\"15\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-[25%] h-screen bg-light px-8 py-16 overflow-scroll\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ml-40 mb-15 cursor-pointer\",onClick:function onClick(e){return HandleLogout(e);},children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",class:\"icon icon-tabler icon-tabler-logout\",width:\"40\",height:\"40\",viewBox:\"0 0 24 24\",\"stroke-width\":\"1.5\",stroke:\"#2c3e50\",fill:\"none\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",children:[/*#__PURE__*/_jsx(\"path\",{stroke:\"none\",d:\"M0 0h24v24H0z\",fill:\"none\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M9 12h12l-3 -3\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18 15l3 -3\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-primary text-lg\",children:\"People\"}),/*#__PURE__*/_jsx(\"div\",{children:users.length>0?users.map(function(_ref8){var userId=_ref8.userId,user=_ref8.user;return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center py-8 border-b border-b-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cursor-pointer flex items-center\",onClick:function onClick(){return fetchMessages('new',user);},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:img7,className:\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:user===null||user===void 0?void 0:user.fullName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-light text-gray-600\",children:user===null||user===void 0?void 0:user.email})]})]})});}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-lg font-semibold mt-24\",children:\"No Conversations\"})})]})]});};export default Dashboard;","map":{"version":3,"names":["useEffect","useRef","useState","Img1","img7","img8","Input","io","Logout","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_messages$receiver3","_messages$receiver4","_messages$receiver5","_messages$messages","_messages$receiver6","_useState","JSON","parse","localStorage","getItem","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","conversations","setConversations","_useState5","_useState6","messages","setMessages","_useState7","_useState8","message","setMessage","_useState9","_useState10","users","setUsers","_useState11","_useState12","socket","setSocket","messageRef","emit","id","on","console","log","data","prev","_objectSpread","concat","_toConsumableArray","_messageRef$current","current","scrollIntoView","behavior","loggedInUser","fetchConversations","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","resData","wrap","_callee$","_context","next","fetch","method","headers","sent","json","stop","apply","arguments","fetchUsers","_ref2","_callee2","_callee2$","_context2","fetchMessages","_ref3","_callee3","conversationId","receiver","_callee3$","_context3","receiverId","_x","_x2","sendMessage","_ref4","_callee4","e","_messages$receiver","_messages$receiver2","_callee4$","_context4","senderId","body","stringify","_x3","HandleLogout","preventDefault","removeItem","disconnect","waitForSocketDisconnect","_ref5","_callee5","_callee5$","_context5","Promise","resolve","className","children","src","width","height","alt","fullName","email","length","map","_ref6","onClick","xmlns","class","viewBox","stroke","fill","d","x1","y1","x2","y2","points","_ref7","_ref7$user","_ref7$user2","ref","placeholder","value","onChange","target","inputClassName","cx","cy","r","_ref8","userId"],"sources":["C:/Users/DELL/Desktop/MERN PROJECT/chatClone/chat-app/Chat App/client/src/modules/Dashboard/index.js"],"sourcesContent":["import { useEffect, useRef, useState  } from 'react'\r\nimport Img1 from '../../assets/img1.jpg'\r\nimport img7 from '../../assets/img7.jpg'\r\nimport img8 from '../../assets/img8.jpg'\r\n\r\nimport Input from '../../components/Input'\r\nimport { io } from 'socket.io-client'\r\nimport Logout from'./LogOut'\r\n\r\n\r\nconst Dashboard = () => {\r\n\tconst [user, setUser] = useState(JSON.parse(localStorage.getItem('user:detail')))\r\n\tconst [conversations, setConversations] = useState([])\r\n\tconst [messages, setMessages] = useState({})\r\n\tconst [message, setMessage] = useState('')\r\n\tconst [users, setUsers] = useState([])\r\n\tconst [socket, setSocket] = useState(null)\r\n\tconst messageRef = useRef(null)\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket=io('http://localhost:8080')\r\n\t\tsetSocket(socket);\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tsocket?.emit('addUser', user?.id);\r\n\t\tsocket?.on('getUsers', users => {\r\n\t\t\tconsole.log('activeUsers :>> ', users);\r\n\t\t})\r\n\t\tsocket?.on('getMessage', data => {\r\n\t\t\tsetMessages(prev => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\tmessages: [...prev.messages, { user: data.user, message: data.message }]\r\n\t\t\t}))\r\n\t\t})\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tmessageRef?.current?.scrollIntoView({ behavior: 'smooth' })\r\n\t}, [messages?.messages])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst loggedInUser = JSON.parse(localStorage.getItem('user:detail'))\r\n\t\tconst fetchConversations = async () => {\r\n\t\t\tconst res = await fetch(`http://localhost:8000/api/conversations/${loggedInUser?.id}`, {\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst resData = await res.json()\r\n\t\t\tsetConversations(resData)\r\n\t\t\t\r\n\t\t}\r\n\t\tfetchConversations()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUsers = async () => {\r\n\t\t\tconst res = await fetch(`http://localhost:8000/api/users/${user?.id}`, {\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst resData = await res.json()\r\n\t\t\tconsole.log('setUser',resData);\r\n\t\t\tsetUsers(resData)\r\n\r\n\t\t\t\r\n\t\t}\r\n\t\tfetchUsers()\r\n\t}, [user])\r\n\r\n\tconst fetchMessages = async (conversationId, receiver) => {\r\n\t\tconst res = await fetch(`http://localhost:8000/api/message/${conversationId}?senderId=${user?.id}&&receiverId=${receiver?.receiverId}`, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst resData = await res.json()\r\n\t\tsetMessages({ messages: resData, receiver, conversationId })\r\n\t\tconsole.log('setMessegaes',resData);\r\n\t}\r\n\r\n\tconst sendMessage = async (e) => {\r\n\t\tsetMessage('')\r\n\t\tsocket?.emit('sendMessage', {\r\n\t\t\tsenderId: user?.id,\r\n\t\t\treceiverId: messages?.receiver?.receiverId,\r\n\t\t\tmessage,\r\n\t\t\tconversationId: messages?.conversationId\r\n\t\t});\r\n\t\tconst res = await fetch(`http://localhost:8000/api/message`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tconversationId: messages?.conversationId,\r\n\t\t\t\tsenderId: user?.id,\r\n\t\t\t\tmessage,\r\n\t\t\t\treceiverId: messages?.receiver?.receiverId\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n    const HandleLogout = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlocalStorage.removeItem('user:token');\r\n\t\r\n\t\tsocket.disconnect();\r\n\t\r\n\t\t// Use useEffect to wait for the socket to disconnect before navigating\r\n\t\tuseEffect(() => {\r\n\t\t  const waitForSocketDisconnect = async () => {\r\n\t\t\tawait new Promise((resolve) => {\r\n\t\t\t  socket.on('disconnect', () => {\r\n\t\t\t\tresolve();\r\n\t\t\t  });\r\n\t\t\t});\r\n\t\r\n\t\t\t// Once the socket is disconnected, navigate to the login page\r\n\t\t\t<Logout/>\r\n\t\t  };\r\n\t\r\n\t\t  waitForSocketDisconnect();\r\n\t\t}, [ \r\n\t\t]);\r\n\t  \r\n\t//socket.disconnect(); // Disconnect the socket\r\n\t//navigate('/login'); // Redirect to the login page\r\n   }\r\n\t\r\n\r\n    \r\n\t\r\n\r\n\treturn (\r\n\t\t<div className='w-screen flex'>\r\n\t\t\t<div className='w-[25%] h-screen bg-secondary overflow-scroll'>\r\n\t\t\t\t<div className='flex items-center my-8 mx-14'>\r\n\t\t\t\t\t<div><img src={img8} width={75} height={75} className='border border-primary p-[2px] rounded-full' alt='' /></div>\r\n\t\t\t\t\t<div className='ml-8'>\r\n\t\t\t\t\t\t<h3 className='text-2xl'>{user?.fullName}</h3>\r\n\t\t\t\t\t\t<p className='text-lg font-light'>{user.email}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<div className='mx-14 mt-10'>\r\n\t\t\t\t\t<div className='text-primary text-lg'>Messages</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconversations.length > 0 ?\r\n\t\t\t\t\t\t\t\tconversations.map(({ conversationId, user }) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div className='flex items-center py-8 border-b border-b-gray-300'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='cursor-pointer flex items-center' onClick={() => fetchMessages(conversationId, user)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div><img src={img8} className=\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\" alt='' /></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='ml-6'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 className='text-lg font-semibold'>{user?.fullName}</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className='text-sm font-light text-gray-600'>{user?.email}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}) : <div className='text-center text-lg font-semibold mt-24'>No Conversations</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='w-[50%] h-screen bg-white flex flex-col items-center'>\r\n\t\t\t\t{\r\n\t\t\t\t\tmessages?.receiver?.fullName &&\r\n\t\t\t\t\t<div className='w-[75%] bg-secondary h-[80px] my-14 rounded-full flex items-center px-14 py-2'>\r\n\t\t\t\t\t\t<div className='cursor-pointer'><img src={Img1} width={60} height={60} className=\"rounded-full\" alt='' /></div>\r\n\t\t\t\t\t\t<div className='ml-6 mr-auto'>\r\n\t\t\t\t\t\t\t<h3 className='text-lg'>{messages?.receiver?.fullName}</h3>\r\n\t\t\t\t\t\t\t<p className='text-sm font-light text-gray-600'>{messages?.receiver?.email}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='cursor-pointer'>\r\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-phone-outgoing\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"black\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n\t\t\t\t\t\t\t\t<path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n\t\t\t\t\t\t\t\t<path d=\"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2\" />\r\n\t\t\t\t\t\t\t\t<line x1=\"15\" y1=\"9\" x2=\"20\" y2=\"4\" />\r\n\t\t\t\t\t\t\t\t<polyline points=\"16 4 20 4 20 8\" />\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className='h-[75%] w-full overflow-scroll shadow-sm'>\r\n\t\t\t\t\t<div className='p-14'>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmessages?.messages?.length > 0 ?\r\n\t\t\t\t\t\t\t\tmessages.messages.map(({ message, user: { id } = {} }) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<div className={`max-w-[40%] rounded-b-xl p-4 mb-6 ${id === user?.id ? 'bg-primary text-white rounded-tl-xl ml-auto' : 'bg-secondary rounded-tr-xl'} `}>{message}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div ref={messageRef}></div>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}) : <div className='text-center text-lg font-semibold mt-24'>No Messages or No Conversation Selected</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tmessages?.receiver?.fullName &&\r\n\t\t\t\t\t<div className=' p-9 w-full flex items-center'>\r\n\t\t\t\t\t\t<Input placeholder='Type a message...' value={message} onChange={(e) => setMessage(e.target.value)} className='w-[75%]' inputClassName='p-4 border-0 shadow-md rounded-full bg-light focus:ring-0 focus:border-0 outline-none' />\r\n\t\t\t\t\t\t<div className={`ml-4 p-2 cursor-pointer bg-light rounded-full ${!message && 'pointer-events-none'}`} onClick={() => sendMessage()}>\r\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-send\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"#2c3e50\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n\t\t\t\t\t\t\t\t<path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n\t\t\t\t\t\t\t\t<line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\" />\r\n\t\t\t\t\t\t\t\t<path d=\"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5\" />\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={`ml-4 p-2 cursor-pointer bg-light rounded-full ${!message && 'pointer-events-none'}`}>\r\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-circle-plus\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"#2c3e50\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n\t\t\t\t\t\t\t\t<path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n\t\t\t\t\t\t\t\t<circle cx=\"12\" cy=\"12\" r=\"9\" />\r\n\t\t\t\t\t\t\t\t<line x1=\"9\" y1=\"12\" x2=\"15\" y2=\"12\" />\r\n\t\t\t\t\t\t\t\t<line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"15\" />\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className='w-[25%] h-screen bg-light px-8 py-16 overflow-scroll'>\r\n\t\t\t\t\t<div className='ml-40 mb-15 cursor-pointer' onClick={(e)=>HandleLogout(e)}> \r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-logout\" width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"#2c3e50\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n  <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n  <path d=\"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2\" />\r\n  <path d=\"M9 12h12l-3 -3\" />\r\n  <path d=\"M18 15l3 -3\" />\r\n</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t<div className='text-primary text-lg'>People</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tusers.length > 0 ?\r\n\t\t\t\t\t\t\tusers.map(({ userId, user }) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className='flex items-center py-8 border-b border-b-gray-300'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='cursor-pointer flex items-center' onClick={() => fetchMessages('new', user)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div><img src={img7} className=\"w-[60px] h-[60px] rounded-full p-[2px] border border-primary\" alt=''/></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='ml-6'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className='text-lg font-semibold'>{user?.fullName}</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className='text-sm font-light text-gray-600'>{user?.email}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}) : <div className='text-center text-lg font-semibold mt-24'>No Conversations</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Dashboard"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}